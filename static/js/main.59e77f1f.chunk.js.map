{"version":3,"sources":["shared/components/FormElements/Button/Button.js","shared/context/auth-context.js","shared/components/UIElements/Loading/LoadingSpinner.js","shared/utils/validators.js","shared/components/UIElements/Backdrop/Backdrop.js","shared/components/UIElements/Loading/ErrorModal.js","shared/hooks/useHttp.js","shared/components/UIElements/Card/Card.js","shared/components/FormElements/Input/Input.js","shared/hooks/useForm.js","shared/components/FormElements/ImageUpload/ImageUpload.js","shared/components/UIElements/Modal/Modal.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainNavigation.js","users/pages/Profile.js","App.js","index.js"],"names":["Button","props","href","className","size","inverse","danger","children","to","exact","type","onClick","disabled","AuthContext","createContext","isLoggedIn","userId","token","login","logout","AuthProvider","useState","setToken","setUserId","setTokenExpirationDate","useCallback","uid","expirationDate","expiredTokenDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","Provider","value","LoadingSpinner","asOverlay","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","val","VALIDATOR_EMAIL","validate","validators","isValid","validator","trim","length","test","Backdrop","ReactDOM","createPortal","document","getElementById","ErrorModal","onCancel","onClear","header","show","error","footer","useHttp","isLoading","setIsLoading","setError","activeHttpRequest","useRef","sendRequest","url","method","body","headers","httpAbortCtrl","AbortController","current","push","fetch","signal","res","json","data","filter","reqCtrl","ok","Error","message","useEffect","forEach","abortCtrl","abort","errorHandler","Card","style","inputReducer","state","action","isTouch","Input","useReducer","valid","inputState","dispatch","id","onInput","onChangeHandler","event","target","onBlurHandler","element","placeholder","onChange","onBlur","rows","htmlFor","label","errorText","formReducer","formIsValid","inputId","inputs","useForm","initialInputs","initialValidity","formState","inputData","formValidity","ImageUpload","file","setFile","previewUrl","setPreviewUrl","filePickerRef","fileReader","FileReader","onload","result","readAsDataURL","ref","display","accept","pickedFile","files","center","src","alt","click","ModalOverlay","content","headerClass","onSubmit","preventDefault","contentClass","footerClass","Modal","in","mountOnEnter","unmountOnExit","timeout","classNames","MainHeader","NavLinks","auth","useContext","SideDrawer","sidebar","CSSTransition","MainNavigation","drawIsOpen","setDrawIsOpen","closeDrawerHandler","Profile","logoutTimer","identiedUser","setIdentiedUser","name","inputHandler","setFormData","process","user","fetchUser","image","useHistory","updateUserHandler","console","log","formData","FormData","append","Users","React","lazy","NewPlace","UserPlace","UpdatePlace","Auth","App","routes","storedData","parse","getItem","tokenExpirationDate","remainingTime","setTimeout","clearTimeout","path","fallback","render"],"mappings":"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","file":"static/js/main.59e77f1f.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport \"./Button.css\";\n\nconst Button = (props) => {\n  if (props.href) {\n    return (\n      <a\n        className={`button button--${props.size || \"default\"} ${\n          props.inverse && \"button--inverse\"\n        } ${props.danger && \"button--danger\"} ${props.className}`}\n        href={props.href}\n      >\n        {props.children}\n      </a>\n    );\n  }\n  if (props.to) {\n    return (\n      <Link\n        to={props.to}\n        exact={props.exact}\n        className={`button button--${props.size || \"default\"} ${\n          props.inverse && \"button--inverse\"\n        } ${props.danger && \"button--danger\"} ${props.className}`}\n      >\n        {props.children}\n      </Link>\n    );\n  }\n  return (\n    <button\n      className={`button button--${props.size || \"default\"} ${\n        props.inverse && \"button--inverse\"\n      } ${props.danger && \"button--danger\"} ${props.className}`}\n      type={props.type}\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { createContext, useCallback, useState } from \"react\";\r\n\r\nexport const AuthContext = createContext({\r\n  isLoggedIn: false,\r\n  userId: \"\",\r\n  token: null,\r\n  login: () => {},\r\n  logout: () => {},\r\n});\r\n\r\nfunction AuthProvider({ children }) {\r\n  const [token, setToken] = useState();\r\n  const [userId, setUserId] = useState();\r\n  const [tokenExpirationDate, setTokenExpirationDate] = useState();\r\n\r\n  const login = useCallback((uid, token, expirationDate) => {\r\n    setUserId(uid);\r\n    setToken(token);\r\n    const expiredTokenDate =\r\n      expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n    setTokenExpirationDate(expiredTokenDate);\r\n    localStorage.setItem(\r\n      \"userData\",\r\n      JSON.stringify({\r\n        userId: uid,\r\n        token,\r\n        expiration: expiredTokenDate.toISOString(),\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setUserId(null);\r\n    setTokenExpirationDate(null);\r\n    setToken(null);\r\n    localStorage.removeItem(\"userData\");\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isLoggedIn: !!token,\r\n        token: token,\r\n        userId: userId,\r\n        login: login,\r\n        logout: logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default AuthProvider;\r\n","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","const VALIDATOR_TYPE_REQUIRE = 'REQUIRE';\nconst VALIDATOR_TYPE_MINLENGTH = 'MINLENGTH';\nconst VALIDATOR_TYPE_MAXLENGTH = 'MAXLENGTH';\nconst VALIDATOR_TYPE_MIN = 'MIN';\nconst VALIDATOR_TYPE_MAX = 'MAX';\nconst VALIDATOR_TYPE_EMAIL = 'EMAIL';\nconst VALIDATOR_TYPE_FILE = 'FILE';\n\nexport const VALIDATOR_REQUIRE = () => ({ type: VALIDATOR_TYPE_REQUIRE });\nexport const VALIDATOR_FILE = () => ({ type: VALIDATOR_TYPE_FILE });\nexport const VALIDATOR_MINLENGTH = val => ({\n  type: VALIDATOR_TYPE_MINLENGTH,\n  val: val\n});\nexport const VALIDATOR_MAXLENGTH = val => ({\n  type: VALIDATOR_TYPE_MAXLENGTH,\n  val: val\n});\nexport const VALIDATOR_MIN = val => ({ type: VALIDATOR_TYPE_MIN, val: val });\nexport const VALIDATOR_MAX = val => ({ type: VALIDATOR_TYPE_MAX, val: val });\nexport const VALIDATOR_EMAIL = () => ({ type: VALIDATOR_TYPE_EMAIL });\n\nexport const validate = (value, validators) => {\n  let isValid = true;\n  for (const validator of validators) {\n    if (validator.type === VALIDATOR_TYPE_REQUIRE) {\n      isValid = isValid && value.trim().length > 0;\n    }\n    if (validator.type === VALIDATOR_TYPE_MINLENGTH) {\n      isValid = isValid && value.trim().length >= validator.val;\n    }\n    if (validator.type === VALIDATOR_TYPE_MAXLENGTH) {\n      isValid = isValid && value.trim().length <= validator.val;\n    }\n    if (validator.type === VALIDATOR_TYPE_MIN) {\n      isValid = isValid && +value >= validator.val;\n    }\n    if (validator.type === VALIDATOR_TYPE_MAX) {\n      isValid = isValid && +value <= validator.val;\n    }\n    if (validator.type === VALIDATOR_TYPE_EMAIL) {\n      isValid = isValid && /^\\S+@\\S+\\.\\S+$/.test(value);\n    }\n  }\n  return isValid;\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = props => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-hook')\n  );\n};\n\nexport default Backdrop;\n","import React from \"react\";\n\nimport Modal from \"../Modal/Modal\";\nimport Button from \"../../FormElements/Button/Button\";\n\nconst ErrorModal = (props) => {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<Button onClick={props.onClear}>Okay</Button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n};\n\nexport default ErrorModal;\n","import { useCallback, useState, useRef, useEffect } from \"react\";\r\n\r\nexport const useHttp = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequest = useRef([]);\r\n\r\n  const sendRequest = useCallback(\r\n    async (url, method = \"GET\", body = null, headers = {}) => {\r\n      setIsLoading(true);\r\n      const httpAbortCtrl = new AbortController();\r\n      activeHttpRequest.current.push(httpAbortCtrl);\r\n      try {\r\n        const res = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n          signal: httpAbortCtrl.signal,\r\n        });\r\n        const data = await res.json();\r\n\r\n        activeHttpRequest.current = activeHttpRequest.current.filter(\r\n          (reqCtrl) => reqCtrl !== httpAbortCtrl\r\n        );\r\n\r\n        if (!res.ok) {\r\n          throw new Error(data.message);\r\n        }\r\n        setIsLoading(false);\r\n        return data;\r\n      } catch (error) {\r\n        setIsLoading(false);\r\n        setError(error.message);\r\n        throw error;\r\n      }\r\n    },\r\n    []\r\n  );\r\n  const errorHandler = () => {\r\n    setError(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      activeHttpRequest.current.forEach((abortCtrl) => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n\r\n  return { isLoading, error, sendRequest, errorHandler };\r\n};\r\n","import React from 'react';\n\nimport './Card.css';\n\nconst Card = props => {\n  return (\n    <div className={`card ${props.className}`} style={props.style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import React, { useReducer, useEffect } from \"react\";\n\nimport { validate } from \"../../../utils/validators\";\n\nimport \"./Input.css\";\n\nconst inputReducer = (state, action) => {\n  switch (action.type) {\n    case \"CHANGE\":\n      return {\n        ...state,\n        value: action.value,\n        isValid: validate(action.value, action.validators),\n      };\n    case \"TOUCH\":\n      return {\n        ...state,\n        isTouch: true,\n      };\n    default:\n      return;\n  }\n};\n\nconst Input = (props) => {\n  const [inputState, dispatch] = useReducer(inputReducer, {\n    value: props.value || \"\",\n    isValid: props.valid || false,\n    isTouch: false,\n  });\n\n  const { id, onInput } = props;\n  const { value, isValid } = inputState;\n\n  useEffect(() => {\n    onInput(id, value, isValid);\n  }, [id, value, isValid, onInput]);\n\n  const onChangeHandler = (event) => {\n    dispatch({\n      type: \"CHANGE\",\n      value: event.target.value,\n      validators: props.validators,\n    });\n  };\n\n  const onBlurHandler = () => {\n    dispatch({ type: \"TOUCH\" });\n  };\n\n  const element =\n    props.element === \"input\" ? (\n      <input\n        id={props.id}\n        type={props.type}\n        placeholder={props.placeholder}\n        onChange={onChangeHandler}\n        onBlur={onBlurHandler}\n        value={inputState.value}\n      />\n    ) : (\n      <textarea\n        id={props.id}\n        rows={props.rows || 3}\n        onChange={onChangeHandler}\n        onBlur={onBlurHandler}\n        value={inputState.value}\n      />\n    );\n\n  return (\n    <div\n      className={`form-control ${\n        !inputState.isValid && inputState.isTouch && \"form-control--invalid\"\n      }`}\n    >\n      <label htmlFor={props.id}>{props.label}</label>\n      {element}\n      {!inputState.isValid && inputState.isTouch && <p>{props.errorText}</p>}\n    </div>\n  );\n};\n\nexport default Input;\n","import { useCallback, useReducer } from \"react\";\r\n\r\nconst formReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"INPUT_CHANGE\":\r\n      let formIsValid = true;\r\n      for (const inputId in state.inputs) {\r\n        if (inputId === action.inputId) {\r\n          formIsValid = formIsValid && action.isValid;\r\n        } else {\r\n          formIsValid = formIsValid && state.inputs[inputId].isValid;\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        inputs: {\r\n          ...state.inputs,\r\n          [action.inputId]: { value: action.value, isValid: action.isValid },\r\n        },\r\n        isValid: formIsValid,\r\n      };\r\n    case \"SET_DATA\":\r\n      return {\r\n        inputs: action.inputs,\r\n        isValid: action.isValid,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport const useForm = (initialInputs, initialValidity) => {\r\n  const [formState, dispatch] = useReducer(formReducer, {\r\n    inputs: initialInputs,\r\n    isValid: initialValidity,\r\n  });\r\n\r\n  const inputHandler = useCallback((id, value, isValid) => {\r\n    dispatch({\r\n      type: \"INPUT_CHANGE\",\r\n      value: value,\r\n      isValid: isValid,\r\n      inputId: id,\r\n    });\r\n  }, []);\r\n\r\n  const setFormData = useCallback((inputData, formValidity) => {\r\n    dispatch({\r\n      type: \"SET_DATA\",\r\n      inputs: inputData,\r\n      isValid: formValidity,\r\n    });\r\n  }, []);\r\n\r\n  return [formState, inputHandler, setFormData];\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nimport Button from \"../Button/Button\";\r\nimport \"./ImageUpload.css\";\r\n\r\nfunction ImageUpload(props) {\r\n  const [file, setFile] = useState();\r\n  const [previewUrl, setPreviewUrl] = useState();\r\n\r\n  const filePickerRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!file) return;\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      setPreviewUrl(fileReader.result);\r\n    };\r\n    fileReader.readAsDataURL(file);\r\n  }, [file]);\r\n\r\n  const pickedHandler = (event) => {\r\n    let pickedFile;\r\n    if (event.target.files && event.target.files.length !== 0) {\r\n      pickedFile = event.target.files[0];\r\n      setFile(pickedFile);\r\n    }\r\n    props.onInput(props.id, pickedFile, true);\r\n  };\r\n\r\n  const pickImageHandler = () => {\r\n    filePickerRef.current.click();\r\n  };\r\n  return (\r\n    <div className=\"form-control\">\r\n      <input\r\n        id={props.id}\r\n        ref={filePickerRef}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        accept=\".jpg,.png,.jpeg\"\r\n        onChange={pickedHandler}\r\n      />\r\n      <div className={`image-upload ${props.center && \"center\"}`}>\r\n        <div className=\"image-upload__preview \">\r\n          {previewUrl ? (\r\n            <img src={previewUrl} alt=\"Preview\" />\r\n          ) : (\r\n            <p>Select an image.</p>\r\n          )}\r\n        </div>\r\n        <Button type=\"button\" onClick={pickImageHandler}>\r\n          CHOOSE IMAGE\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImageUpload;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\n\r\nimport Backdrop from \"../Backdrop/Backdrop\";\r\nimport \"./Modal.css\";\r\n\r\nconst ModalOverlay = (props) => {\r\n  const content = (\r\n    <div className={`modal ${props.className}`} style={props.style}>\r\n      <header className={`modal__header ${props.headerClass}`}>\r\n        <h2>{props.header}</h2>\r\n      </header>\r\n      <form\r\n        onSubmit={\r\n          props.onSubmit ||\r\n          ((event) => {\r\n            event.preventDefault();\r\n          })\r\n        }\r\n      >\r\n        <div className={`modal__content ${props.contentClass}`}>\r\n          {props.children}\r\n        </div>\r\n        <footer className={`modal__footer ${props.footerClass}`}>\r\n          {props.footer}\r\n        </footer>\r\n      </form>\r\n    </div>\r\n  );\r\n  return ReactDOM.createPortal(content, document.getElementById(\"modal-hook\"));\r\n};\r\n\r\nfunction Modal(props) {\r\n  return (\r\n    <>\r\n      {props.show && <Backdrop onClick={props.onCancel} />}\r\n      <CSSTransition\r\n        in={props.show}\r\n        mountOnEnter\r\n        unmountOnExit\r\n        timeout={200}\r\n        classNames=\"modal\"\r\n      >\r\n        <ModalOverlay {...props} />\r\n      </CSSTransition>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n","import React from 'react';\n\nimport './MainHeader.css';\n\nconst MainHeader = props => {\n  return <header className=\"main-header\">{props.children}</header>;\n};\n\nexport default MainHeader;\n","import React, { useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../../context/auth-context\";\r\nimport Button from \"../FormElements/Button/Button\";\r\nimport \"./NavLinks.css\";\r\n\r\nfunction NavLinks(props) {\r\n  const auth = useContext(AuthContext);\r\n\r\n  const userId = auth.userId;\r\n  return (\r\n    <ul className=\"nav-links\">\r\n      <li>\r\n        <NavLink to={\"/\"} exact>\r\n          All Users\r\n        </NavLink>\r\n      </li>\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink to={`/${userId}/places`}>My Places</NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink to={\"/places/new\"}>New Place</NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink to={`/users/profile/${userId}`}>Profile</NavLink>\r\n        </li>\r\n      )}\r\n      {!auth.isLoggedIn ? (\r\n        <li>\r\n          <NavLink to={\"/auth\"}>Authenticate</NavLink>\r\n        </li>\r\n      ) : (\r\n        <li>\r\n          <Button onClick={() => auth.logout()}>Log Out</Button>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default NavLinks;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport \"./SideDrawer.css\";\n\nconst SideDrawer = (props) => {\n  const sidebar = (\n    <CSSTransition\n      in={props.show}\n      timeout={500}\n      classNames=\"slide-in-left\"\n      mountOnEnter\n      unmountOnExit\n    >\n      <aside className=\"side-drawer\" onClick={props.onClick}>\n        {props.children}\n      </aside>\n    </CSSTransition>\n  );\n\n  return ReactDOM.createPortal(sidebar, document.getElementById(\"drawer-hook\"));\n};\n\nexport default SideDrawer;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport MainHeader from \"./MainHeader\";\nimport NavLinks from \"./NavLinks\";\nimport SideDrawer from \"./SideDrawer\";\nimport \"./MainNavigation.css\";\nimport Backdrop from \"../UIElements/Backdrop/Backdrop\";\n\nconst MainNavigation = (props) => {\n  const [drawIsOpen, setDrawIsOpen] = useState(false);\n\n  const closeDrawerHandler = () => {\n    setDrawIsOpen(false);\n  };\n  const openDrawerHandler = () => {\n    setDrawIsOpen(true);\n  };\n  return (\n    <>\n      {drawIsOpen && <Backdrop onClick={closeDrawerHandler} />}\n      <SideDrawer show={drawIsOpen} onClick={closeDrawerHandler}>\n        <nav className=\"main-navigation__drawer-nav\">\n          <NavLinks />\n        </nav>\n      </SideDrawer>\n      <MainHeader>\n        <button\n          className=\"main-navigation__menu-btn\"\n          onClick={openDrawerHandler}\n        >\n          <span />\n          <span />\n          <span />\n        </button>\n        <h1 className=\"main-navigation__title\">\n          <Link to=\"/\">YourPlaces</Link>\n        </h1>\n        <nav className=\"main-navigation__header-nav\">\n          <NavLinks />\n        </nav>\n      </MainHeader>\n    </>\n  );\n};\n\nexport default MainNavigation;\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nimport Input from \"../../shared/components/FormElements/Input/Input\";\r\nimport Card from \"../../shared/components/UIElements/Card/Card\";\r\nimport Button from \"../../shared/components/FormElements/Button/Button\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/Loading/LoadingSpinner\";\r\nimport ErrorModal from \"../../shared/components/UIElements/Loading/ErrorModal\";\r\nimport ImageUpload from \"../../shared/components/FormElements/ImageUpload/ImageUpload\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\nimport { VALIDATOR_REQUIRE } from \"../../shared/utils/validators\";\r\nimport \"./Auth.css\";\r\nimport { useForm } from \"../../shared/hooks/useForm\";\r\nimport { useHttp } from \"../../shared/hooks/useHttp\";\r\n\r\nfunction Profile() {\r\n  const auth = useContext(AuthContext);\r\n  const [identiedUser, setIdentiedUser] = useState();\r\n  const { isLoading, error, sendRequest, errorHandler } = useHttp();\r\n\r\n  const [formState, inputHandler, setFormData] = useForm(\r\n    {\r\n      name: {\r\n        value: \"\",\r\n        isValid: true,\r\n      },\r\n    },\r\n    true\r\n  );\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const data = await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}/users/${auth.userId}`\r\n        );\r\n        setIdentiedUser(data.user);\r\n      } catch (err) {}\r\n    };\r\n    fetchUser();\r\n  }, [sendRequest, auth.userId]);\r\n\r\n  useEffect(() => {\r\n    if (identiedUser) {\r\n      setFormData(\r\n        {\r\n          name: {\r\n            value: identiedUser.name,\r\n            isValid: true,\r\n          },\r\n          image: {\r\n            value: null,\r\n            isValid: true,\r\n          },\r\n        },\r\n        true\r\n      );\r\n    }\r\n  }, [setFormData, identiedUser]);\r\n\r\n  const history = useHistory();\r\n  const updateUserHandler = async (event) => {\r\n    event.preventDefault();\r\n    console.log(formState.inputs.image.value);\r\n    const formData = new FormData();\r\n    formData.append(\"name\", formState.inputs.name.value);\r\n    if (formState.inputs.image.value)\r\n      formData.append(\"image\", formState.inputs.image.value);\r\n    console.log(formData);\r\n    try {\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users/${auth.userId}`,\r\n        \"PATCH\",\r\n        formData\r\n      );\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  if (!formState.inputs.name.value) {\r\n    return (\r\n      <div className=\"center\">\r\n        <Card>\r\n          <h2>Nothing</h2>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ErrorModal error={error} onClear={errorHandler} />\r\n      <form className=\"auth-form\" onSubmit={updateUserHandler}>\r\n        {isLoading && <LoadingSpinner asOverlay />}\r\n        <Input\r\n          id=\"name\"\r\n          element=\"input\"\r\n          type=\"text\"\r\n          label=\"Name\"\r\n          validators={[VALIDATOR_REQUIRE()]}\r\n          errorText=\"Please enter a valid title.\"\r\n          onInput={inputHandler}\r\n          value={formState.inputs.name.value}\r\n          valid={formState.inputs.name.isValid}\r\n        />\r\n        <ImageUpload\r\n          id=\"image\"\r\n          onInput={inputHandler}\r\n          errorText=\"Please choose valid file (*.jpg, *.png, *.jpeg)\"\r\n        />\r\n        <Button type=\"submit\" disabled={!formState.isValid}>\r\n          UPDATE\r\n        </Button>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useContext, useEffect, Suspense } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport MainNavigation from \"./shared/components/Navigation/MainNavigation\";\nimport LoadingSpinner from \"./shared/components/UIElements/Loading/LoadingSpinner\";\nimport { AuthContext } from \"./shared/context/auth-context\";\nimport Profile from \"./users/pages/Profile\";\n\nlet logoutTimer;\n\nconst Users = React.lazy(() => import(\"./users/pages/Users\"));\nconst NewPlace = React.lazy(() => import(\"./places/pages/NewPlace\"));\nconst UserPlace = React.lazy(() => import(\"./places/pages/Userplaces\"));\nconst UpdatePlace = React.lazy(() => import(\"./places/pages/UpdatePlace\"));\nconst Auth = React.lazy(() => import(\"./users/pages/Auth\"));\n\nfunction App() {\n  const auth = useContext(AuthContext);\n  let routes;\n\n  useEffect(() => {\n    const storedData = JSON.parse(localStorage.getItem(\"userData\"));\n    if (\n      storedData &&\n      storedData.token &&\n      new Date(storedData.expiration) > new Date()\n    ) {\n      auth.login(\n        storedData.userId,\n        storedData.token,\n        new Date(storedData.expiration)\n      );\n    }\n  }, [auth.login]);\n\n  useEffect(() => {\n    if (auth.token && auth.tokenExpirationDate) {\n      const remainingTime =\n        auth.tokenExpirationDate.getTime() - new Date().getTime();\n      logoutTimer = setTimeout(auth.logout, remainingTime);\n    } else {\n      clearTimeout(logoutTimer);\n    }\n  }, [auth.token, auth.logout, auth.tokenExpirationDate]);\n\n  if (auth.token) {\n    routes = (\n      <Switch>\n        <Route path={\"/\"} exact>\n          <Users />\n        </Route>\n        <Route path={\"/users/profile/:uid\"} exact>\n          <Profile />\n        </Route>\n        <Route path={\"/:userId/places\"} exact>\n          <UserPlace />\n        </Route>\n        <Route path={\"/places/new\"} exact>\n          <NewPlace />\n        </Route>\n        <Route path={\"/places/:placeId\"} exact>\n          <UpdatePlace />\n        </Route>\n        <Redirect to={\"/\"} />\n      </Switch>\n    );\n  } else {\n    routes = (\n      <Switch>\n        <Route path={\"/\"} exact>\n          <Users />\n        </Route>\n        <Route path={\"/:userId/places\"} exact>\n          <UserPlace />\n        </Route>\n        <Route path={\"/auth\"} exact>\n          <Auth />\n        </Route>\n        <Redirect to={\"/auth\"} />\n      </Switch>\n    );\n  }\n\n  return (\n    <Router>\n      <MainNavigation />\n      <main>\n        <Suspense\n          fallback={\n            <div className=\"center\">\n              <LoadingSpinner />\n            </div>\n          }\n        >\n          {routes}\n        </Suspense>\n      </main>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport AuthProvider from \"./shared/context/auth-context\";\n\nReactDOM.render(\n  <AuthProvider>\n    <App />\n  </AuthProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}